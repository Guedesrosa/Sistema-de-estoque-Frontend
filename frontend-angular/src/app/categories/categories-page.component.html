<div class="grid cols-2">
  <div class="card">
    <h2>ğŸ·ï¸ Cadastro de Categoria</h2>
    <form class="form" [formGroup]="form" (ngSubmit)="salvar()">
      <div class="row two">
        <div>
          <label>Nome da Categoria *</label>
          <input type="text" placeholder="Ex: Limpeza, Enlatados, Vegetais" formControlName="nome">
        </div>
        <div>
          <label>Tamanho *</label>
          <select formControlName="tamanho">
            <option *ngFor="let t of tamanhos" [value]="t">{{t}}</option>
          </select>
        </div>
      </div>
      <div class="row two">
        <div>
          <label>Embalagem *</label>
          <select formControlName="embalagem">
            <option *ngFor="let e of embalagens" [value]="e">{{e}}</option>
          </select>
        </div>
        <div style="display: flex; align-items: flex-end;">
          <button type="submit" [disabled]="form.invalid" style="width: 100%;">
            {{form.value.id ? 'âœï¸ Atualizar' : 'â• Adicionar'}}
          </button>
        </div>
      </div>
      <div *ngIf="form.value.id" style="margin-top: 8px;">
        <button type="button" class="secondary" (click)="form.reset(); form.patchValue({tamanho: 'MÃ©dio', embalagem: 'PlÃ¡stico'})" style="width: 100%;">
          ğŸ”„ Cancelar EdiÃ§Ã£o
        </button>
      </div>
    </form>
  </div>
  <div class="card">
    <h2>ğŸ“‚ Lista de Categorias</h2>
    <div class="toolbar">
      <input class="search" type="text" placeholder="ğŸ” Buscar categoria..." [(ngModel)]="search" (input)="applyFilter()">
      <div class="pagination">
        <button class="secondary small" (click)="page=Math.max(1,page-1);applyFilter()" [disabled]="page === 1">â—€ Anterior</button>
        <span>PÃ¡gina {{page}} de {{getTotalPages()}}</span>
        <button class="secondary small" (click)="page=page+1;applyFilter()" [disabled]="page * pageSize >= items.length">PrÃ³xima â–¶</button>
      </div>
    </div>
    <div *ngIf="filtered.length === 0" class="empty-state">
      <h3>Nenhuma categoria encontrada</h3>
      <p>{{search ? 'Tente ajustar sua busca' : 'Adicione sua primeira categoria'}}</p>
    </div>
    <table class="table" *ngIf="filtered.length > 0">
      <thead>
      <tr>
        <th>Categoria</th>
        <th>Tamanho</th>
        <th>Embalagem</th>
        <th>AÃ§Ãµes</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let i of filtered">
        <td><strong>{{i.nome}}</strong></td>
        <td>
          <span class="badge" [style.background]="i.tamanho === 'Pequeno' ? 'var(--info-light)' : (i.tamanho === 'MÃ©dio' ? 'var(--warning-light)' : 'var(--success-light)')">
            {{i.tamanho === 'Pequeno' ? 'ğŸ“¦' : (i.tamanho === 'MÃ©dio' ? 'ğŸ“¦ğŸ“¦' : 'ğŸ“¦ğŸ“¦ğŸ“¦')}} {{i.tamanho}}
          </span>
        </td>
        <td>
          <span class="badge" [style.background]="i.embalagem === 'Lata' ? 'var(--warning-light)' : (i.embalagem === 'Vidro' ? 'var(--info-light)' : 'var(--primary-light)')">
            {{i.embalagem === 'Lata' ? 'ğŸ¥«' : (i.embalagem === 'Vidro' ? 'ğŸ¶' : 'ğŸ§´')}} {{i.embalagem}}
          </span>
        </td>
        <td>
          <div style="display: flex; gap: 6px;">
            <button class="secondary small" (click)="editar(i)">âœï¸</button>
            <button class="danger small" (click)="pedirExclusao(i)">ğŸ—‘ï¸</button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
<app-confirm-modal 
  [open]="confirmOpen" 
  title="âš ï¸ Confirmar ExclusÃ£o" 
  [description]="'Deseja realmente excluir a categoria \'' + (toDelete?.nome || '') + '\'? Produtos associados podem ser afetados.'" 
  (confirm)="confirmarExclusao()" 
  (cancel)="cancelarExclusao()">
</app-confirm-modal>