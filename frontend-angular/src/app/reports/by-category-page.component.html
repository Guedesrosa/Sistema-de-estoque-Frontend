<div class="card">
  <h2>ðŸ“‚ Quantidade de Produtos por Categoria</h2>
  <p style="color: var(--muted); margin-bottom: 20px;">RelatÃ³rio da quantidade de produtos por categoria contendo o nome da categoria e quantidade de produtos distintos.</p>
  <div *ngIf="items.length === 0" class="empty-state">
    <h3>Nenhuma categoria cadastrada</h3>
    <p>Cadastre categorias e produtos para visualizar o relatÃ³rio</p>
  </div>
  <div *ngIf="items.length > 0" class="stats-card" style="margin-bottom: 24px;">
    <h3>Total de Categorias</h3>
    <p class="value">{{items.length}}</p>
  </div>
  <table class="table" *ngIf="items.length > 0">
    <thead>
      <tr>
        <th>Categoria</th>
        <th>Quantidade de Produtos</th>
        <th>Percentual</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let i of items; let idx = index">
        <td><strong>{{i.categoria}}</strong></td>
        <td>
          <span class="badge" style="font-size: 14px; padding: 6px 14px;">{{i.quantidade}} {{i.quantidade === 1 ? 'produto' : 'produtos'}}</span>
        </td>
        <td>
          <div style="display: flex; align-items: center; gap: 12px;">
            <div style="flex: 1; height: 8px; background: var(--bg); border-radius: 4px; overflow: hidden;">
              <div [style.width]="getPercentualWidth(i.quantidade) + '%'" 
                   [style.background]="getCorBarra(idx)"
                   style="height: 100%; transition: width 0.3s ease;"></div>
            </div>
            <span style="font-weight: 600; color: var(--muted); min-width: 50px; text-align: right;">
              {{getPercentual(i.quantidade) | number:'1.1-1'}}%
            </span>
          </div>
        </td>
      </tr>
      <tr style="background: var(--bg); font-weight: 700;">
        <td><strong>TOTAL</strong></td>
        <td><strong>{{getTotalProdutos()}} produtos</strong></td>
        <td><strong>100%</strong></td>
      </tr>
    </tbody>
  </table>
</div>